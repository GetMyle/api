# Ticket

## Get user ticket

```javascript
const request = require('request');

const options = {
    method: 'POST',
    url: 'https://api.getmyle.com/v1/ticket',
    headers: {
        Authorization: getHawkHeader('https://api.getmyle.com/v1/ticket', 'POST', getMyletCredentials()).field
    },
    json: {
        session: getSessionToken()
    }
};

request(options, (err, res, userTicket) => {
    if (err) {
        return console.error(err);
    }
    console.log(userTicket);
});
```

> Request body structure

```json
{
   "session": "<SESSION>"
}
```

> Response body structure

```json
{
    "exp": 1478832837390,
    "app": "com.example.mymylet",
    "scope": ["mylet"],
    "grant": 10,
    "user": 100,
    "key": "-6b18XP5TDwlp9RxOhfZv4-5Zvm1n_LQ",
    "algorithm": "sha256",
    "ext": {
        "dbs": "2e2ed05a-4f63-4850-9297-5b8384397dd0"
    },
    "id": "<A TICKET IDENTIFIER>"
}
```

This endpoint issues [a user ticket](#user-ticket) for a given [session token](#session-token).

### HTTP Request

`POST https://api.getmyle.com/v1/ticket`

### Headers

Header | Description
--------- | -----------
Authorization | [The authorization header](#authorization-header) generated by [Hawk](https://github.com/hueniverse/hawk) using mylet credentials

### Request body

[A session token](#session-token) has to be sent. See example on the right.

### Response body

[A user ticket](#user-ticket).



## Refresh user ticket

```javascript
const request = require('request');

const options = {
    method: 'POST',
    url: 'https://api.getmyle.com/v1/ticket/reissue',
    headers: {
        Authorization: getHawkHeader('https://api.getmyle.com/v1/ticket/reissue', 'POST', getExistingUserTicket()).field
    },
    json: true
};

request(options, (err, res, newUserTicket) => {
    if (err) {
        return console.error(err);
    }
    console.log(newUserTicket);
});
```

> Response body structure

```json
{
    "exp": 1478832837390,
    "app": "com.example.mymylet",
    "scope": ["mylet"],
    "grant": 10,
    "user": 100,
    "key": "-6b18XP5TDwlp9RxOhfZv4-5Zvm1n_LQ",
    "algorithm": "sha256",
    "ext": {
        "dbs": "2e2ed05a-4f63-4850-9297-5b8384397dd0"
    },
    "id": "<A TICKET IDENTIFIER>"
}
```

This endpoint issues another [user ticket](#user-ticket).

### HTTP Request

`POST https://api.getmyle.com/v1/ticket/refresh`

### Headers

Header | Description
--------- | -----------
Authorization | [The authorization header](#authorization-header) generated by [Hawk](https://github.com/hueniverse/hawk) using an existing [user ticket](#user-ticket).

### Request body

Empty.

### Response body

[New user ticket](#user-ticket).